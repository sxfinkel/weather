<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Local Weather</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Quicksand|Sacramento' rel='stylesheet' type='text/css'>
  </head>

  <style>
    #data {
      font-family: Quicksand;
      font-size: 22px;
    }

    #data h1 {
      font-family: Sacramento;
      font-size: 42px;
    }

    .center-block {
      margin-top: 60px;
      float: none !important;
    }
  </style>
  <body>
    <div class="background container-fluid">
      <div class="row">
        <div class="col-sm-6 center-block text-center">
          <div id="data">
            <h1>Retrieving your weather info...</h1>
            <i class="fa fa-3x fa-spinner fa-spin fa-pulse"></i>
          </div>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script>
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(success, error);

        function success(position) {
          var key = "6d0af58f1221cec34ad4126a975288ab";
          var lat = position.coords.latitude;
          var lon = position.coords.longitude;
          var data;

          $.getJSON( "https://api.forecast.io/forecast/" + key + "/" + lat + "," + lon + "?callback=?", function(data) {
            console.log(data);
           $("#data").html("<h1>" + data.currently.summary + "</h1>" + "Current temperature is: " + Math.floor(data.currently.temperature) + " F"+ "<br>Feels like " + Math.floor(data.currently.apparentTemperature) + " F");
          });
        };

        function error() {
          $("#data").html("Sorry, unable to retrieve your location.");
        };

      } else {
        $("#data").html("Sorry, geolocation is not supported by your browser.");
      }
    </script>
  </body>
</html>
